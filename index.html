<!DOCTYPE html>
<html lang="en">
<head>
  <!-- META INFO -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AM Rasel's Official Radio</title>
  <meta name="description" content="Tune into AM Rasel's Official Radio â€“ Where the vibes never stop!" />
  <meta name="theme-color" content="#0a0a23" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Comic+Relief:wght@400;700&display=swap" rel="stylesheet">
  <!-- FAVICON FOR BROWSER TAB -->
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
  <!-- APP ICONS FOR ANDROID / WINDOWS -->
  <link rel="icon" type="image/png" sizes="192x192" href="/icon-192.png" />
  <link rel="icon" type="image/png" sizes="512x512" href="/icon-512.png" />
  <!-- APP ICONS FOR iOS (IPHONE / IPAD) -->
  <link rel="apple-touch-icon" sizes="180x180" href="/icon-192.png" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="apple-mobile-web-app-title" content="AMR Radio" />
  <!-- TWITTER CARD SUPPORT -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="AM Rasel's Official Radio" />
  <meta name="twitter:description" content="Tune into the beat of your vibe! ðŸŽ§" />
  <meta name="twitter:image" content="https://amraselofficial.github.io/radio/og-image.png" />
  <!-- MANIFEST FOR WEB APP INSTALLATION -->
  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#3367D6">
  <link rel="stylesheet" href="style.css">
  <!-- SEO Meta Tags -->
  <meta name="description" content="Live 24/7 radio streaming. Listen to MP3 audio from anywhere online. No ads, just music.">
  <meta name="keywords" content="online radio, mp3 streaming, GitHub radio, Rasel radio, AMRaselOfficial, TV, Abdul, Momin, Rasel, Abdul Momin Rasel, AMRasel, AM, Official, RaselEdit, music server, render radio">
  <meta name="author" content="Rasel">
  <meta name="robots" content="index, follow">
  <meta property="og:title" content="Rasel's Online Radio" />
  <meta property="og:description" content="Listen to free live 24/7 MP3 radio streaming online." />
  <meta name="google-site-verification" content="jArhpaE5w4mJPIqyQfbHQMN4VLcuBOnDeXnAIj0-WM8" />
  <meta property="og:url" content="https://amraselofficial.github.io/radio/" />
  <meta property="og:type" content="website" />
  </head>
<body>
  <canvas id="background-canvas"></canvas>
  <!-- Menu Button -->
  <div class="menu-container">
  <button id="menu-btn" class="menu-btn">
  <span class="bar"></span>
  <span class="bar"></span>
  <span class="bar"></span>
  </button>
  <div id="menu-dropdown" class="menu-dropdown">
  <a href="https://www.facebook.com/RaselEdit" target="_blank">Facebook</a>
  <a href="https://www.instagram.com/RaselEdit">Instagram</a>
  <a href="https://www.youtube.com/@AMRaselOfficial">YouTube</a>
  <a href="https://tiktok.com/@RaselEdits">TikTok</a>
  <a href="mailto:info.amrasel@gmail.com">Contact</a>
  <a href="https://amraselofficial.github.io/main/" target="_blank">1.Portfolio</a>
  <a href="https://amraselofficial.github.io/index/">2.Portfolio</a>
  <a href="https://ko-fi.com/AMRaselOfficial"><img src="kofi.png" height="20px" width="100px"></a>
  <center><button id="theme-toggle" class="theme-btn">Dark</button></center>
  </div>
  </div>
  <div class="chat-container">
    <h1>AM Rasel's Radio</h1>
    <center><div class="audio-player">
<div class="visualizer-box">
  <canvas id="canvas"></canvas>
  <button id="play-btn" class="play-button"></button>
</div>
<audio id="radio-audio" crossorigin="anonymous">
<source src="https://radio-1jz4.onrender.com/live" type="audio/mpeg">
Your browser does not support the audio element.
</audio>
    </center>
	  <iframe src="https://player.castr.com/live_40cf8710c22b11f0a21bc5a5e2811113?onlyAudio=true" width="100%" style="height: 48px;" frameborder="0" scrolling="no" allow="autoplay" allowfullscreen webkitallowfullscreen mozallowfullscreen oallowfullscreen msallowfullscreen></iframe>
    <div id="notification-box">
      <div id="notifications"><!-- Notifications will appear here--></div>
    </div>
    <div id="chat-box"><!-- Messages will appear here --></div>
	<div class="input-container">
		<input type="text" id="message-input" placeholder="Write a message..." />
		<button id="send-button" onclick="sendMessage()">Send</button>
	</div>
  </div>
  <!-- Firebase and app logic -->
  <script type="module" src="app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyAn8kADK2SbKClaEZZ1QVmw8ja5jI6s16A",
      authDomain: "livechat-amraselofficial.firebaseapp.com",
      databaseURL: "https://livechat-amraselofficial-default-rtdb.asia-southeast1.firebasedatabase.app",
      projectId: "livechat-amraselofficial",
      storageBucket: "livechat-amraselofficial.appspot.com",
      messagingSenderId: "271740919161",
      appId: "1:271740919161:web:189b1f0857eb91fdaa23a8",
      measurementId: "G-TWEER2R26W"
    };
  
    // âœ… Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();
    const messagesRef = db.ref("messages");
    
    // âœ… Load only last 300 messages
    messagesRef.limitToLast(300).on("child_added", (snapshot) => {
    const data = snapshot.val();
    const messageElement = document.createElement("div");
    messageElement.classList.add("chat-message");
    
    messageElement.innerHTML = `
    <strong>${data.username}:</strong> ${data.message}
    `;
    
    document.getElementById("chat-box").appendChild(messageElement);
    
      // Auto-scroll
      const chatBox = document.getElementById("chat-box");
      chatBox.scrollTop = chatBox.scrollHeight;
    });
  
    // âœ… Send message function
    function sendMessage() {
      const input = document.getElementById("message-input");
      const message = input.value.trim();
      if (!message) return;
  
      let username = localStorage.getItem("username");
      if (!username) {
        username = prompt("What's your name?");
        localStorage.setItem("username", username);
      }
      messagesRef.push({ username, message});
      input.value = "";
    }
  </script>
  <script>
  // âœ… Function to add a new notification
  function addNotification(text) {
  const notificationBox = document.getElementById("notifications");
  const note = document.createElement("div");
  note.classList.add("notification");
  note.textContent = text;
  
  notificationBox.appendChild(note);
  
  // âœ… Auto-scroll to bottom (latest notification visible)
  notificationBox.scrollTop = notificationBox.scrollHeight;
  }
  
  // âœ… Example: You can test by calling
  addNotification("Welcome to AM Rasel Radio!");
  // addNotification("Server will restart at 3PM!");
  </script>
  <!-- Dark Theme JS-->
  <script>
  const themeBtn = document.getElementById('theme-toggle');
  
  // Load saved theme
  if (localStorage.getItem('theme') === 'dark') {
  document.body.classList.add('dark');
  themeBtn.textContent = 'Light';
  }
  
  themeBtn.addEventListener('click', () => {
  document.body.classList.toggle('dark');
  
  if (document.body.classList.contains('dark')) {
  themeBtn.textContent = 'Light';
  localStorage.setItem('theme', 'dark');
  } else {
  themeBtn.textContent = 'Dark';
  localStorage.setItem('theme', 'light');
  }
  });
  </script>
<script>
const canvas = document.getElementById("background-canvas");
const ctx = canvas.getContext("2d");

let particles = [];
const colors = ["#00ffe5", "#1adb54", "#ff0077", "#ffaa00", "#0066ff"];

// âœ… Make sure canvas always fills screen
function resizeCanvas() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
window.addEventListener("resize", resizeCanvas);
resizeCanvas();

class Particle {
  constructor() {
    this.reset();
  }
  reset() {
    this.x = Math.random() * canvas.width;
    this.y = Math.random() * canvas.height;
    this.size = Math.random() * 4 + 2;
    this.life = Math.random() * 200 + 100; // total lifespan
    this.remainingLife = this.life;
    this.color = colors[Math.floor(Math.random() * colors.length)];
    this.vx = (Math.random() - 0.5) * 1.0;
    this.vy = (Math.random() - 0.5) * 1.0;
  }
  update() {
    this.x += this.vx;
    this.y += this.vy;
    this.remainingLife--;

    if (this.remainingLife <= 0) {
      this.reset();
    }
  }
  draw() {
    const lifeRatio = this.remainingLife / this.life;
    let alpha = 1;

    // âœ… Smooth fade-in (first 20%) & fade-out (last 20%)
    if (lifeRatio > 0.8) {
      alpha = 1 - (lifeRatio - 0.8) * 5;
    } else if (lifeRatio < 0.2) {
      alpha = lifeRatio * 5;
    }

    ctx.beginPath();
    ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
    ctx.fillStyle = this.hexToRgba(this.color, alpha);
    ctx.shadowColor = this.color;
    ctx.shadowBlur = 20 * alpha;
    ctx.fill();
    ctx.shadowBlur = 0;
  }
  hexToRgba(hex, alpha) {
    const bigint = parseInt(hex.slice(1), 16);
    const r = (bigint >> 16) & 255;
    const g = (bigint >> 8) & 255;
    const b = bigint & 255;
    return `rgba(${r},${g},${b},${alpha})`;
  }
}

function createParticles(num) {
  for (let i = 0; i < num; i++) {
    particles.push(new Particle());
  }
}
createParticles(80); // increase number for denser stars

function animate() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  particles.forEach(p => {
    p.update();
    p.draw();
  });
  requestAnimationFrame(animate);
}
animate();
</script>
<script>
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', function() {
      navigator.serviceWorker.register('sw.js')
        .then(function(registration) {
          console.log('ServiceWorker registered with scope:', registration.scope);
        }).catch(function(error) {
          console.error('ServiceWorker registration failed:', error);
        });
    });
  }
</script>
<script type="text/javascript">
const audio2 = document.getElementById("radio-audio");
const playBtn2 = document.getElementById("play-btn");
const canvas2 = document.getElementById("canvas");
const ctx2 = canvas2.getContext("2d");

let isPlaying2 = false;

// Web Audio API
const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
const analyser = audioCtx.createAnalyser();
const source = audioCtx.createMediaElementSource(audio2);
source.connect(analyser);
analyser.connect(audioCtx.destination);

analyser.fftSize = 2048;
const bufferLength = analyser.fftSize;
const dataArray = new Uint8Array(bufferLength);

function resizeCanvas() {
  const dpr = window.devicePixelRatio || 1;
  canvas2.width = canvas2.clientWidth * dpr;
  canvas2.height = canvas2.clientHeight * dpr;
  ctx2.setTransform(dpr, 0, 0, dpr, 0, 0);
}
window.addEventListener("resize", resizeCanvas);
resizeCanvas();

function draw() {
  requestAnimationFrame(draw);
  analyser.getByteTimeDomainData(dataArray);

  ctx2.fillStyle = "black";
  ctx2.fillRect(0, 0, canvas2.width, canvas2.height);

  ctx2.lineWidth = 1;
  ctx2.strokeStyle = "#0f0";
  ctx2.beginPath();

  const sliceWidth = canvas2.width / bufferLength;
  let x = 0;
const centerY = canvas2.clientHeight / 2; // middle of visible div
for (let i = 0; i < bufferLength; i++) {
    const v = dataArray[i] / 128.0;
    const y = centerY + (v - 1) * (canvas2.clientHeight / 2) * 0.6; // scale with clientHeight
    if (i === 0) {
        ctx2.moveTo(x, y);
    } else {
        ctx2.lineTo(x, y);
    }
    x += sliceWidth;
}

  ctx2.stroke();
}

// Play button click
playBtn2.addEventListener("click", async () => {
  if (!isPlaying2) {
    try {
      await audioCtx.resume();   // âœ… unlock AudioContext
      await audio2.play();       // âœ… start stream
      draw();                    // âœ… start visualizer
      playBtn2.classList.add("playing");
      isPlaying2 = true;
    } catch (err) {
      console.error("Play failed:", err);
      alert("Click again to start the radio!");
    }
  } else {
    audio2.pause();
    playBtn2.classList.remove("playing");
    isPlaying2 = false;
  }
});
</script>
<!-- ================= DROPDOWN MENU ================= -->
<script>
  const menuBtn = document.getElementById("menu-btn");
  const menuDropdown = document.getElementById("menu-dropdown");

  menuBtn.addEventListener("click", (e) => {
    e.stopPropagation();
    menuBtn.classList.toggle("active");
    menuDropdown.classList.toggle("show");
  });

  window.addEventListener("click", (e) => {
    if (!menuBtn.contains(e.target) && !menuDropdown.contains(e.target)) {
      menuDropdown.classList.remove("show");
      menuBtn.classList.remove("active");
    }
  });
</script>
</body>
</html>
